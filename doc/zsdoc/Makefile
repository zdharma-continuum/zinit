# This Makefile is to convert supplied Asciidoc files into
# other formats like pdf and man. The files contain Zplugin's
# code documentation.
#
# *.adoc files are generated by Makefile from upper (i.e. top)
# directory.

all: man pdf

# MANUALS
# Converted with a2x from asciidoc package

man: man/zinit.zsh.1 man/zinit-side.zsh.1 man/zinit-install.zsh.1 man/zinit-autoload.zsh.1

man/zinit.zsh.1:
	@mkdir -p man
	a2x --verbose -L --doctype manpage --format manpage -D man zinit.zsh.adoc

man/zinit-side.zsh.1:
	@mkdir -p man
	a2x --verbose -L --doctype manpage --format manpage -D man zinit-side.zsh.adoc

man/zinit-install.zsh.1:
	@mkdir -p man
	a2x --verbose -L --doctype manpage --format manpage -D man zinit-install.zsh.adoc

man/zinit-autoload.zsh.1:
	@mkdir -p man
	a2x --verbose -L --doctype manpage --format manpage -D man zinit-autoload.zsh.adoc

# PDFS
# Uses asciidoctor not a2x (i.e. not asciidoc)

pdf: pdf/zinit.zsh.pdf pdf/zinit-side.zsh.pdf pdf/zinit-install.zsh.pdf pdf/zinit-autoload.zsh.pdf

pdf/zinit.zsh.pdf:
	@mkdir -p pdf
	asciidoctor -a reproducible -b pdf -r asciidoctor-pdf -D pdf zinit.zsh.adoc

pdf/zinit-side.zsh.pdf:
	@mkdir -p pdf
	asciidoctor -a reproducible -b pdf -r asciidoctor-pdf -D pdf zinit-side.zsh.adoc

pdf/zinit-install.zsh.pdf:
	@mkdir -p pdf
	asciidoctor -a reproducible -b pdf -r asciidoctor-pdf -D pdf zinit-install.zsh.adoc

pdf/zinit-autoload.zsh.pdf:
	@mkdir -p pdf
	asciidoctor -a reproducible -b pdf -r asciidoctor-pdf -D pdf zinit-autoload.zsh.adoc

clean:
	rm -rf man pdf data

.PHONY: man pdf clean

# vim:noet:sts=8:ts=8
